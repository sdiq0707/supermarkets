<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> - SuperMarket登录 -</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <link rel="shortcut icon" href="/img/favicon.ico"> <link href="css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="css/font-awesome.css?v=4.4.0" rel="stylesheet">
    <link href="css/animate.css" rel="stylesheet">
    <link href="css/style.css?v=4.1.0" rel="stylesheet">
    <script>if(window.top !== window.self){ window.top.location = window.location;}</script>
</head>

<body class="gray-bg">

    <div class="middle-box text-center loginscreen  animated fadeInDown">
        <div>
            <div>
                <h2 class="logo-name">S+</h2>
            </div>
            <h3>欢迎使用 _SuperMarket</h3>
            <form class="m-t" role="form" method="post">
                <div class="form-group">
                    <input type="text" name="username" class="form-control" placeholder="用户名" required="">
                </div>
                <div class="form-group">
                    <input type="password" name="password" class="form-control" placeholder="密码" required="">
                </div>
                <button type="button" id="send" class="btn btn-primary block full-width m-b">登 录</button>


                <p class="text-muted text-center"> <a href="index.html"><small>忘记密码了？</small></a> | <a href="register.html">注册一个新账号</a>
                </p>

            </form>
        </div>
    </div>

    <!-- 全局js -->
    <script src="js/jquery.min.js?v=2.1.4"></script>
    <script src="js/bootstrap.min.js?v=3.3.6"></script>

    <script type="text/javascript">
		$(function(){
			$("#send").click(function(){
				var params = $("form:eq(0)").serialize();
				// 先判断用户名密码是否为null以及是否校验过，  在发ajax请求
				$.ajax({
					type:"post",
					url:"http://localhost:9999/users/login",
					data:params,
					//dataType: "json",
					headers:{
						"Accept":"application/json"
					},
					beforeSend: function(){

					},
					complete: function(){

					},
					success:function(data){
						console.log(data.status+":"+data.msg+":"+data.path+":"+data.user);
						if(data.status==200){
							if("path" in data){
								sessionStorage.setItem("item", data.user);
								window.location = data.path;
							}
						}
					},
					error: function(data) {
						alert("error"); 
					}
				});
			});
		});
		
	</script>
    

</body>

</html>
